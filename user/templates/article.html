{% extends 'base.html'%}
{%load static%}
{% block title %}
    <title>{{post.titleTag}} </title>
{% endblock %}

{% block content%}

	<div>
		<h3>{{post.title}}</h3>
	<small>By : </small><br>
	

	<div class="card mb-3">
  <div class="row no-gutters">

    <div class="col-md-2">
    	{%if post.author.profile.profile_pic%}
    	<img class="card-img" src="{{post.author.profile.profile_pic.url}}"></img>
    	{%else%}
    	<img class="card-img" src="{%static '/theblog/images/pic.png'%}"></img>
    	{%endif%}
    </div>
    
    <div class="col-md-10">
      <div class="card-body">
        <h5 class="card-title">{{post.author.first_name}} {{post.author.last_name}}</h5>
        <p class="card-text">

        	<small class="text-muted">
        		<a href="{%url 'profile_page' post.author.profile.id %}">View Profile |</a>
        		{% if post.author.profile.facebook_url %}
        		<a href="{{post.author.profile.facebook_url}}">
        			<img src="{%static '/theblog/images/fb_ic.png'%}" width="30" height="30">
				</a>
        		{%endif%}
        		{% if post.author.profile.Instagram_url %}
        		<a href="{{post.author.profile.instagram_url}}">
        			<img src="{%static '/theblog/images/in_ic.png'%}" width="30" height="30">
        		</a>
        		{%endif%}
        	</small>
    	</p>
        <p class="card-text">{{post.author.profile.bio}}</p>
        
      </div>
    </div>
  </div>
</div>
	
		
	
	
	<div style="padding-top: 5px;">
		<small>Created at: {{post.post_date}}</small>
		
	</div>
	{% if user.is_authenticated %}
	{%if user.id == post.author.id%}

	<div style="padding-top: 5px;">
		<small><a href="{% url 'update' post.pk%}">Edit Here</a></small>
		
	</div>
	<div style="padding-top: 5px;">
		<small><a href="{% url 'delete' post.pk%}">Click to delete</a></small>
		
	</div>

	<hr>
	{%endif%}
	{%endif%}
	{% if post.header_image %}
	<br>
	<img src="{{post.header_image.url}}">
	
	<br>
	{%endif%}

	<br>
	{{post.body |safe}}
	<br><br>
	{% if user.is_authenticated %}
	<div style="display: flex;" "justify-content: center;">
		<div style="padding-top: 20px" >
		<form method="POST" action="{%url 'like_post' post.pk %}">


			{% csrf_token %}
			{% if liked %}
			<button class="btn btn-primary btn-sm" , type="submit" , name='post_id',value="{{post.id}}">
				DisLike 
			</button>  
			<!--<button type="submit" name="post_id" value="{{ post.id }}" class="btn {% if user in post.likes.all %}btn-primary{% else %}btn-outline-primary{% endif %} btn-sm">Unlike</button> -->
			{%else%}
			<button class="btn btn-primary btn-sm" , type="submit" , name='post_id',value="{{post.id}}">
				Like 
			</button

			{% endif %}
			
		</form>
	</div>
	{%endif%}
	<br>
	<div style="padding: 20px">
		<p>{{post.total_like}} Likes</p>
	</div>


	
	</div>

	<h3>Comments...</h3>
	<br>

{%if not post.comments.all %}
No Comments yet <a href="{% url 'add_comment' post.pk%}"> Add One</a>
{%else%}
<a href="{% url 'add_comment' post.pk%}"> Add Comment</a>
<br><br>
{% for comment in post.comments.all%}
<b>{{comment.name}}</b>
<b>{{comment.date_added}}</b>
<br>

{{comment.comment}}<br><hr>
{%endfor%}

{%endif%}
<br><br>

	<div style="display: flex; padding-top: 20px;">
		<a class="btn btn-secondary" href="{% url 'home' %}">Back</a>
	</div>

	
	</div>

	
	
	

	

{% endblock %}


